<form [formGroup]="form" (submit)="onSubmit()">
  <section>
    <mat-form-field>
      <mat-label>Senha atual</mat-label>
      <input
        matInput
        #currentPassword
        type="password"
        autocomplete="current-password"
        formControlName="currentPassword"
      />
      <mat-error>Mínimo 6 caracteres</mat-error>
    </mat-form-field>
    <div>
      <p>Sua senha usada até hoje</p>
    </div>
  </section>
  <section>
    <mat-form-field>
      <mat-label>Nova senha</mat-label>
      <input
        matInput
        type="password"
        autocomplete="new-password"
        formControlName="newPassword"
      />
      <mat-error>Mínimo 6 caracteres</mat-error>
    </mat-form-field>
    <div>
      @if (form.hasError('bothAreTheSame') && form.dirty) {
      <mat-error>As duas senhas são iguais</mat-error>
      }
    </div>
  </section>

  <footer>
    <button
      type="button"
      [disabled]="form.enabled"
      mat-stroked-button
      (click)="form.enable(); currentPassword.focus()"
    >
      <mat-icon>lock_open</mat-icon>
      <span>Alterar</span>
    </button>

    <button [disabled]="form.disabled" mat-flat-button>
      <mat-icon>cloud_upload</mat-icon>
      <span>Salvar</span>
    </button>
  </footer>
</form>
